**Функциональность:**
1. Мониторинг новых сообщений во всех группах, куда добавлен бот
2. Классификация сообщений как спам с помощью LLM моделей
3. Удаление спам-сообщений (при согласии всех администраторов)
4. Уведомление администраторов группы о спам-сообщениях
5. Учет обработанных сообщений и удаленного спама для биллинга

**Биллинговая функциональность:**

1. **Модель данных:**
   - Хранение информации о пользователях (ID, имя, баланс, режим обработки спама)
   - Хранение информации о группах (ID группы, список администраторов, статус модерации)
   - Хранение списка одобренных пользователей для каждой группы

2. **Стоимость операций:**
   - Обработка сообщения от нового пользователя: 1 звезда
   - Все остальные операции: бесплатно

3. **Типы модерируемых сообщений:**
   - Текстовые сообщения
   - Изображения с текстом
   - Ссылки
   - Пересланные сообщения
   - Медиа-файлы с подписями

4. **Исключения из модерации:**
   - Сообщения от уже проверенных пользователей
   - Системные сообщения
   - Сообщения от администраторов группы
   - Сервисные сообщения (присоединение/выход участников)
   - Закрепленные сообщения
   - Опросы
   - Сообщения без текстового содержания

5. **Логика обработки сообщений:**
   - При обработке сообщения проверяется наличие платящих администраторов
   - Если первый администратор не имеет достаточно кредитов, проверяется следующий
   - Если ни у кого из администраторов нет кредитов, модерация отключается
   - Для известных пользователей проверки пропускаются
   - Спам-сообщения удаляются только при согласии всех администраторов (режим удаления)
   - Если хотя бы один администратор в режиме уведомлений, сообщения не удаляются

6. **Режимы обработки спама:**
   - Режим удаления: спам-сообщения автоматически удаляются при согласии всех администраторов
   - Режим уведомлений: администраторы получают уведомления о спаме без автоматического удаления
   - Каждый администратор может индивидуально настроить свой режим
   - Для удаления сообщений требуется консенсус всех администраторов

7. **Обработка платежей:**
   - Оплата происходит звездами Telegram
   - При успешной оплате начисляются кредиты
   - Автоматическое включение модерации во всех группах после пополнения баланса

8. **Уведомления:**
   - Уведомление администраторов о спам-сообщениях
   - Персонализированные уведомления в зависимости от режима администратора
   - Уведомления о статусе платежей
   - Уведомления об изменении статуса модерации

**Целевая аудитория:**
Администраторы Telegram-групп и каналов, которые хотят автоматизировать защиту от спама в группах и комментариях к каналам с помощью ИИ.

**Основные цели:**
1. Снижение количества спама в Telegram-группах
2. Улучшение пользовательского опыта за счет фильтрации нежелательных сообщений
3. Предоставление настраиваемого решения под нужды каждой группы
4. Обеспечение эффективного управления спамом для администраторов групп
5. Организация удобной системы оплаты и учета использования сервиса
6. Обеспечение гибкости в обработке спама через систему режимов и консенсуса

**Персона бота:**
Бот - киберорганизм, обитающий в киберпространстве. Он считает, что не блокирует спамеров, а уничтожает их. Он позиционирует себя как могущественный защитник киберпространства. Бот слегка высокомерно относится к пользователям, считая их слабыми существами с ограниченными способностями.
